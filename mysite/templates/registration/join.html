{% extends 'base.html' %} {% block title %}Join{% endblock %} {% block content %}
<div class="col s12 m12 l6">
    <div class="card grey lighten-5">
        <div class="card-content">
            <div class="card-image">
                <img src="/static/assets/img/carousel/members_2017.jpg">
                <span class="card-title">Join Cosmos<i class="material-icons left" style="">perm_identity</i></span>
            </div>
            <br/>
            <p>Any student of TU/e can become a Cosmos member for free. To sign up, fill in your information below, and we will send an e-mail to confirm your registration. If you are having problems with your registration, feel free to contact us! <br/><br/>
                <form method="post" action="{% url 'create_member' %}">
                    {% csrf_token %}
                    <table>
                        <tr>
                            <td class="input-field">
                                <input id="first_name" maxlength="254" name="first_name" class="validate" type="text" required />
                                <label for="first_name">First Name</label>
                            </td>

                            <td class="input-field">
                                <input id="last_name" maxlength="254" name="last_name" class="validate" type="text" required />
                                <label for="last_name">Last Name</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="input-field">
                                <input id="password" maxlength="25" name="password" class="validate" type="password" required/>
                                <label for="password">Password</label>
                            </td>

                            <td class="input-field">
                                <input id="password-confirm" maxlength="25" name="password-confirm" class="validate" type="password" required/>
                                <label for="password-confirm">Password Confirmation</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="input-field">
                                <input id="email" maxlength="254" name="email" class="validate" type="email" required/>
                                <label for="email">E-mail Address</label>
                            </td>

                            <td class="input-field">
                                <input id="phone_nr" maxlength="15" name="phone_nr" class="validate" type="text" required/>
                                <label for="phone_nr">Phone Number</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="input-field">
                                <select id="gender" name="gender" class="validate" type="text" required>
                          <option value="" selected disabled></option>
                          ('\1','\1')
                          ('\1','\1')
                          ('\1','\1')
                        </select>

                                <label for="gender">Gender</label>
                            </td>

                            <td class="input-field">

                                <select id="nationality" name="nationality" class="validate" type="text" required>
                          <option value="" selected disabled></option>
                          ('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')
                        </select>

                                <label for="nationality">Nationality</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="input-field">

                                <select id="department" name="department" class="validate" type="text" required>
                          <option value="" selected disabled></option>

                          ('\1','\1')
                          ('\1','\1')
                          ('\1','\1')
                          ('\1','\1')
                          ('\1','\1')
                          ('\1','\1')
                          ('\1','\1')
                          ('\1','\1')
                          ('\1','\1')
                          ('\1','\1')
                          ('\1','\1')
                        </select>

                                <label for="department">Department</label>
                            </td>

                            <td class="input-field">

                                <select id="program" name="program" class="validate" type="text" required>
                            <option value="" selected disabled></option>
                           ('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')('\1','\1')

                        </select>

                                <label for="program">Program</label>
                            </td>
                        </tr>
                        <tr>
                            <td class="input-field">
                                <input id="tue_id" maxlength="254" name="tue_id" class="validate" type="text" />
                                <label for="tue_id">TU/e Number (Optional)</label>
                            </td>

                            <td class="input-field">
                                <input id="card_number" maxlength="254" name="card_number" class="validate" type="text" />
                                <label for="card_number">Campus Card Number (Optional)</label>
                            </td>
                        </tr>
                    </table>

                    <button class="btn light-blue darken-4 waves-effect waves-light" type="submit" value="login" name="action">Join
                    <i class="material-icons right">send</i>
                </button>

                    <input type="hidden" name="next" value="/" />
                </form>


        </div>
    </div>
</div>
<div id="modal" class="modal">
    <div class="modal-content">
        <h4 id="modal-title"></h4>
        <p id="modal-message"></p>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat" id="modal-ok-button"></a>
    </div>
</div>
<!-- TODO: MAKE NOT SKETCHY -->
<script type="text/javascript">
    $(document).ready(function() {
        $('.modal').modal();
        var joined = getParameterByName('joined');
        if (joined == 'true') {
            $('#modal-title').text('Welcome!');
            $('#modal-message').text('Your account has been created successfully, your information will be validated as soon as possible by our board members. As soon as your information is verified, you will receive an e-mail from us. Please make sure to check your spam folder.');
            $('#modal-ok-button').text('Continue');
            $('#modal').modal('open');
        } else if (joined == 'false') {
            var error = getParameterByName('error');
            $('#modal-title').text('There was a problem...');
            $('#modal-ok-button').text('Ok');
            if (error == 'email-exists') {
                $('#modal-message').text('There is already a user with this email in our system, please try with a different one.');
                $('#modal').modal('open');
            } else if (error == 'password') {
                $('#modal-message').text('Your password and password confirmation do not match. Please make sure they are the same.');
                $('#modal').modal('open');
            }
        }
    });

    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }
</script>
{% endblock %}